# 🪨 石割り分析アプリ - Stone Breaker Analyzer

岩の目を分析してセリ矢の最適な配置を提案するWebアプリケーションです。大きな岩を効率的に小さく分割するためのツールとして活用できます。

## 📱 特徴

- **カメラ撮影対応**: iPhoneなどのスマートフォンで直接岩を撮影して解析
- **画像解析**: 先進的なエッジ検出アルゴリズムで岩の目・割れ目を自動検出
- **最適配置提案**: セリ矢の打ち込みポイントを優先度付きで表示
- **PWA対応**: スマートフォンにアプリとしてインストール可能
- **オフライン動作**: インターネット接続なしでも使用可能

## 🚀 使用方法

### 1. アプリの起動
- `index.html`をWebブラウザで開く
- または、PWAとしてスマートフォンにインストール

### 2. 画像の取得
**カメラで撮影する場合:**
1. 「📷 カメラで撮影」ボタンをタップ
2. カメラアクセスを許可
3. 岩を画面中央に配置して「📷 撮影」をタップ

**ファイルから選択する場合:**
1. 「📁 ファイルを選択」ボタンをタップ
2. 端末内の岩の画像を選択

### 3. 解析結果の確認
- 画像が自動的に解析されます
- 緑色の線: 検出された岩の目・割れ目
- 赤色のマーカー: 高優先度のセリ矢ポイント
- オレンジ色のマーカー: 中優先度のセリ矢ポイント

### 4. 結果の活用
- 分析結果を参考にセリ矢の配置を決定
- 推奨分割数も表示されます

## 📊 分析結果の見方

### マーカーの色分け
| 色 | 優先度 | 説明 |
|---|--------|------|
| 🔴 赤 | 高 | 割れ目の交差点や強い岩の目 |
| 🟠 オレンジ | 中 | 比較的明確な岩の目 |
| 🟢 緑 | - | 検出された岩の目・割れ目のライン |

### 分析項目
- **検出された岩の目・割れ目**: 画像から見つかった自然な割れ目の数
- **高優先度セリ矢ポイント**: 最も効果的な打ち込みポイント
- **中優先度セリ矢ポイント**: 補助的な打ち込みポイント
- **推奨分割数**: 効率的な分割のための目安

## 💡 撮影のコツ

### 良い撮影条件
- ✅ 十分な自然光がある環境
- ✅ 岩の表面が画面全体に映る
- ✅ 影が少ない角度から撮影
- ✅ 手ブレしないよう安定した状態で撮影

### 避けるべき条件
- ❌ 暗すぎる環境
- ❌ 逆光での撮影
- ❌ 岩の表面が見えにくい角度
- ❌ ピントが合っていない画像

## 🔧 技術仕様

### 対応ブラウザ
- Safari (iOS)
- Chrome (Android/PC)
- Firefox (Android/PC)
- Edge (PC)

### 推奨環境
- スマートフォン: iOS 13.0以降、Android 8.0以降
- PC: Chrome 80以降、Firefox 75以降

### ファイル形式
対応画像形式: JPEG, PNG, WebP

## 📱 PWAインストール方法

### iPhoneの場合
1. Safariでアプリを開く
2. 画面下部の共有ボタン（□↑）をタップ
3. 「ホーム画面に追加」を選択
4. アプリ名を確認して「追加」をタップ

### Androidの場合
1. Chromeでアプリを開く
2. メニュー（⋮）から「ホーム画面に追加」を選択
3. アプリ名を確認して「追加」をタップ

## ⚠️ 注意事項

- 本アプリは岩割り作業の参考情報を提供するものです
- 実際の作業では安全対策を十分に行ってください
- セリ矢の取り扱いは専門知識を持つ方が行ってください
- 分析結果は目安であり、現場の状況を最優先してください

## 🛠️ ファイル構成

```
stone_breaker/
├── index.html          # メインアプリケーション
├── stone-analyzer.js   # 画像解析ロジック
├── manifest.json       # PWA設定ファイル
├── sw.js              # サービスワーカー
└── README.md          # このファイル
```

## 📄 ライセンス

このアプリケーションは学習・研究目的で作成されています。商用利用の際は適切な許可を得てください。

## 🤝 サポート

- バグ報告や機能要望がございましたら、開発者までご連絡ください
- 安全な岩割り作業については、専門業者にご相談ください

---

**⚡ 効率的な岩割り作業のために、Stone Breaker Analyzerをご活用ください！**